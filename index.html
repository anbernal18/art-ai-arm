<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI vs Human Creativity</title>

  <!-- jsPsych UMD stable version -->
  <link rel="stylesheet" href="https://unpkg.com/jspsych@7.3.3/dist/jspsych.css">
  <script src="https://unpkg.com/jspsych@7.3.3/dist/jspsych.umd.js"></script>
  <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2/dist/plugin-preload.umd.js"></script>
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.2/dist/plugin-html-button-response.umd.js"></script>

  <style>
    .stim-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 30px;
    }
    img {
      max-width: 40%;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    }
    body { text-align: center; font-family: Arial; background: #fafafa;}
  </style>
</head>

<body>
  <h1 style="color:red;">TEST: If you see this, HTML works!</h1>
</body>

<script>
// SINGLE TEST PAIR
const pairs = [
  {
    id: "001",
    human: "Portraiture_Images/Portraiture_001_MonaLisa.jpg",
    ai: "Portraiture_AI_Images/Portraiture_AI001_MonaLisa.jpg"
  }
];

// Initialize jsPsych correctly for UMD version
const jsPsych = jsPsychModule.initJsPsych({
  on_finish: function () {
    jsPsych.data.get().localSave('csv', 'results.csv');
    document.body.innerHTML = "<h2>Thank you! Responses recorded.</h2>";
  }
});

const timeline = [];

// Preload
timeline.push({
  type: jsPsychPreload,
  images: [pairs[0].human, pairs[0].ai]
});

// Consent
timeline.push({
  type: jsPsychHtmlButtonResponse,
  stimulus: `
    <h2>Consent</h2>
    <p>This study explores creativity in artworks.</p>
    <p>Click continue.</p>
  `,
  choices: ["I agree"]
});

// Main trial
timeline.push({
  type: jsPsychHtmlButtonResponse,
  stimulus: `
    <h3>Which one is more creative?</h3>
    <div class="stim-container">
      <img src="${pairs[0].human}">
      <img src="${pairs[0].ai}">
    </div>
  `,
  choices: ["Left", "Right"]
});

jsPsych.run(timeline);
</script>
</html>
